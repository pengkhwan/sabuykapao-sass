"use strict";var e=require("jsdom");Object.defineProperty(exports,"__esModule",{value:!0}),exports.htmlToPortableText=function(r,t){var s=new e.JSDOM(r),n=s.window.document,o=function(e,r){var t="number"==typeof r,s=t?e.childNodes[r]:e,n=[];if(s.nodeType===s.TEXT_NODE)return s.textContent;if(s.nodeType!==s.ELEMENT_NODE)return"";var o=s.tagName.toLowerCase();if("p"===o||"h1"===o||"h2"===o||"h3"===o||"h4"===o||"h5"===o||"h6"===o||"blockquote"===o||"div"===o){var a={_type:"block",style:"h1"===o||"h2"===o||"h3"===o||"h4"===o||"h5"===o||"h6"===o?o:"normal"};"blockquote"===o&&(a.style="blockquote");var l={_type:"span",marks:[],text:s.textContent};return a.children=[l],a}if("strong"===o||"em"===o||"a"===o){l={_type:"span",marks:[],text:s.textContent};return"strong"===o&&l.marks.push("strong"),"em"===o&&l.marks.push("em"),"a"===o&&s.hasAttribute("href")&&l.marks.push({_type:"link",href:s.getAttribute("href")}),l}if("ul"===o||"ol"===o)for(var i=0;i<s.children.length;i++){var c=s.children[i];if("li"===c.tagName.toLowerCase()){var p={_type:"block",style:"normal",level:1,listItem:"ul"===o?"bullet":"number"};(l={_type:"span",marks:[],text:c.textContent}).text&&p.children.push(l),n.push(p)}}return n};return Array.from(n.body.childNodes).flatMap(o)};